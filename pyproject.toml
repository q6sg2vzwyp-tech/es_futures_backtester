[tool.black]
line-length = 100
target-version = ["py311","py312","py313"]
# Use a verbose regex that matches both / and \ on Windows
exclude = '''
(?x)
(
  ^\.venv
| ^build
| ^dist
| (^|[/\\])archive([/\\]|$)
| (^|[/\\])tools([/\\]|$)
| (^|[/\\])patch_bandit_b110_b112\.py$
| (^|[/\\])summarize_gates\.py$
)
'''

[tool.ruff]
line-length = 100
target-version = "py311"
exclude = [
  "build/","dist/",".venv/","archive/","tools/",
  "patch_bandit_b110_b112.py","summarize_gates.py"
]

[tool.ruff.lint]
extend-select = ["I","UP","B","C4","SIM","PIE","RUF"]
# Temporarily quiet the current stragglers; we can re-enable later.
ignore = ["E203","F841","RUF046","B905","PIE810","E741"]

[tool.ruff.lint.isort]
known-first-party = ["es_futures_backtester"]
combine-as-imports = true

[tool.mypy]
python_version = "3.11"
ignore_missing_imports = true
show_error_codes = true
warn_unused_ignores = true
disallow_untyped_defs = false
explicit_package_bases = true
exclude = '(^\.venv/|^tests/|^build/|^dist/|^archive/)'

[tool.pytest.ini_options]
addopts = "-q -ra"
testpaths = ["tests"]
python_files = ["test_*.py"]
filterwarnings = ["ignore::DeprecationWarning"]

[tool.bandit]
skips = ["B101"]